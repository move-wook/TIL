# 논리 삭제 vs 물리 삭제

## ✅ 개념 비교

| 항목           | 논리 삭제 (Logical Deletion)                         | 물리 삭제 (Physical Deletion)                        |
|----------------|------------------------------------------------------|------------------------------------------------------|
| 정의           | 데이터는 삭제하지 않고 '삭제됨' 상태로 표시         | 데이터 자체를 DB에서 완전히 제거                    |
| 쿼리 예시      | `UPDATE user SET deleted_yn = 'Y' WHERE id = 1`      | `DELETE FROM user WHERE id = 1`                      |
| 조회 시        | `WHERE deleted_yn = 'N'` 조건 필요                   | 일반 SELECT로 단순 조회                              |
| 복구 가능성    | ✅ 가능                                               | ❌ 불가능                                             |
| 감사/이력 추적 | ✅ 용이                                               | ❌ 별도 로깅 필요                                     |
| 디스크 공간    | ❌ 계속 차지함                                        | ✅ 절약 가능                                          |
| 성능 영향      | ❌ 테이블 커지면 성능 저하                            | ✅ 테이블 슬림화로 성능 향상                         |
| 참조 무결성    | ✅ FK 문제 없음                                       | ❌ FK 제약 시 오류 발생 가능                         |
| 삭제 사유 기록 | 가능 (삭제자, 시간 등 기록 가능)                     | 별도 처리 필요                                       |
| 사용 예시      | 회원 탈퇴, 게시글 숨기기, 이력 보존 등               | 로그, 캐시, 개인정보 파기, 임시 데이터 등           |

---

## ✅ 사용 이유 요약

### 논리 삭제를 사용하는 이유
- 삭제 복구가 필요한 경우
- 삭제 이력 추적이 중요한 경우
- 외부 참조가 있는 데이터일 경우 (FK 제약)
- 데이터 보존이 필요하나 조회에서 제외하고 싶은 경우

### 물리 삭제를 사용하는 이유
- 데이터가 완전히 불필요한 경우
- 개인정보 보호법 등 법적 삭제 요구가 있는 경우
- 성능 향상, 디스크 공간 확보가 필요한 경우
- 로그, 캐시 등 임시성 데이터의 경우

---

## ✅ 혼합 전략

> "논리 삭제 후 일정 기간이 지나면 물리 삭제" 방식으로 관리하는 경우도 많음  
> 예: **회원 탈퇴 후 30일간 보관 → 이후 자동 영구 삭제**
