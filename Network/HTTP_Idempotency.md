# HTTP λ©”μ„λ“μ λ©±λ“±μ„± (Idempotency)

## β… μ •μ

λ©±λ“±μ„±(Idempotency)μ΄λ€ **κ°™μ€ μ—°μ‚°μ„ μ—¬λ¬ λ² μ μ©ν•΄λ„ κ²°κ³Όκ°€ λ™μΌν• μ„±μ§**μ„ μλ―Έν•λ‹¤.  
HTTPμ—μ„ λ©±λ“±μ„±μ΄λ€, **κ°™μ€ μ”μ²­μ„ μ—¬λ¬ λ² λ³΄λ‚΄λ„ μ„λ²„ μƒνƒμ— λ³€ν™”κ°€ μ—†κ±°λ‚ λ™μΌν• κ²°κ³Όλ¥Ό λ³΄μ¥ν•λ” κ²ƒ**μ΄λ‹¤.

---

## π’΅ λ©±λ“±ν• HTTP λ©”μ„λ“

| HTTP λ©”μ„λ“ | λ©±λ“±μ„± | μ„¤λ… |
|-------------|--------|------|
| GET         | β…     | λ¦¬μ†μ¤ μ΅°ν μ”μ²­. νΈμ¶ μμ™€ κ΄€κ³„μ—†μ΄ μƒνƒ λ³€ν™” μ—†μ |
| HEAD        | β…     | GETκ³Ό μ μ‚¬ν•μ§€λ§ λ³Έλ¬Έ μ—†μ΄ ν—¤λ”λ§ λ°ν™ |
| PUT         | β…     | μ§€μ •λ λ¦¬μ†μ¤λ¥Ό λ®μ–΄μ“°κΈ°. μ—¬λ¬ λ² νΈμ¶ν•΄λ„ κ²°κ³Ό λ™μΌ |
| DELETE      | β…     | λ¦¬μ†μ¤ μ‚­μ  μ”μ²­. μ΄λ―Έ μ‚­μ λ μƒνƒμ—μ„ λ‹¤μ‹ μ‚­μ ν•΄λ„ λ™μΌ |
| OPTIONS     | β…     | μ”μ²­ κ°€λ¥ν• λ©”μ„λ“μ— λ€ν• μ •λ³΄λ¥Ό μ΅°ν |
| TRACE       | β…     | ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ μ”μ²­ κ²½λ΅λ¥Ό μ¶”μ  (λ””λ²„κΉ… λ©μ ) |

---

## β οΈ λ©±λ“±ν•μ§€ μ•μ€ HTTP λ©”μ„λ“

| HTTP λ©”μ„λ“ | λ©±λ“±μ„± | μ„¤λ… |
|-------------|--------|------|
| POST        | β     | μƒλ΅μ΄ λ¦¬μ†μ¤ μƒμ„± λλ” μ‘μ—… μν–‰. λ§¤ μ”μ²­λ§λ‹¤ μ„λ²„ μƒνƒ λ³€ν™” κ°€λ¥ |
| PATCH       | β     | λ¦¬μ†μ¤μ μΌλ¶€λ§ μμ •. λ°λ³µ μ‹ κ²°κ³Όκ°€ λ‹¬λΌμ§ μ μμ |

---

## π›  λ©±λ“±μ„±μ΄ μ¤‘μ”ν• μ΄μ 

- λ„¤νΈμ›ν¬ μ¥μ• λ‚ μ„λ²„ μ¤λ¥λ΅ μΈν•΄ ν΄λΌμ΄μ–ΈνΈκ°€ **μ”μ²­μ„ μ¬μ‹λ„ν•  μλ°–μ— μ—†λ” μƒν™©**μ΄ λ°μƒν•  μ μμ
- μ΄λ• μ”μ²­μ΄ λ©±λ“±ν•λ©΄ **μ¤‘λ³µ μ”μ²­μΌλ΅ μΈν• λ¶€μ‘μ© μ—†μ΄ μ¬μ”μ²­ κ°€λ¥**
- λ©±λ“±ν•μ§€ μ•μ€ κ²½μ° **μ¤‘λ³µ μ‹¤ν–‰μ— λ”°λ¥Έ λ¶€μ‘μ©(μ: μ¤‘λ³µ κ²°μ , μ¤‘λ³µ λ“±λ΅)** λ°μƒ μ„ν—

---

## π” λ©±λ“±μ„± ν™μ© μ‚¬λ΅€: κ²°μ  API

### π“ λ¬Έμ  μƒν™©

1. μ‚¬μ©μκ°€ κ²°μ  μ”μ²­μ„ λ³΄λƒ„  
2. μ„λ²„μ—μ„λ” μ‹¤μ  κ²°μ  μν–‰  
3. ν΄λΌμ΄μ–ΈνΈλ” λ„¤νΈμ›ν¬ μ¤λ¥λ΅ μ‘λ‹µμ„ λ°›μ§€ λ»ν•¨  
4. κ°™μ€ κ²°μ  μ”μ²­μ„ λ‹¤μ‹ λ³΄λƒ„  

### π“ λ©±λ“±μ„± μ—†λ” API
- μ„λ²„λ” **λ κ²°μ **λ¥Ό μν–‰ν•¨ β†’ **μ¤‘λ³µ κ²°μ  λ°μƒ**

### π“ λ©±λ“±μ„± μλ” API
- ν΄λΌμ΄μ–ΈνΈλ” `Idempotency-Key`λ¥Ό ν•¨κ» λ³΄λƒ„
- μ„λ²„λ” κ°™μ€ ν‚¤λ΅ μ΄λ―Έ μ²λ¦¬λ μ”μ²­μ„ μΈμ‹ν•κ³  **κ°™μ€ μ‘λ‹µμ„ λ°ν™**ν•¨

```http
POST /payments
Idempotency-Key: abc-123
```

---

## π§© λ©±λ“± ν‚¤(Idempotency-Key) κµ¬ν„ λ°©μ‹

- ν΄λΌμ΄μ–ΈνΈμ—μ„ μ”μ²­ μ‹ κ³ μ  ν‚¤λ¥Ό μƒμ„±ν•μ—¬ `Header`μ— ν¬ν•¨
- μ„λ²„λ” ν•΄λ‹Ή ν‚¤μ™€ μ”μ²­ λ‚΄μ©μ„ **μΊμ‹± λλ” λ΅κ·Έλ΅ μ €μ¥**
- λ™μΌ ν‚¤μ μ”μ²­μ΄ μ¤λ©΄ **μ²λ¦¬ν•μ§€ μ•κ³  μ΄μ „ μ‘λ‹µ μ¬μ‚¬μ©**

---

## π“ λ©±λ“±μ„±κ³Ό μ‹μ¤ν… μ„¤κ³„μ μ—°κ²°

- **APIμ μμΈ΅ κ°€λ¥μ„±** ν–¥μƒ
- **μ¥μ•  λ³µκµ¬, μ¬μ‹λ„ μ²λ¦¬**μ—μ„ μ‹ λΆ°μ„± λ³΄μ¥
- **λ¶„μ‚° μ‹μ¤ν…, λ©”μ‹μ§€ ν, μ¤‘λ³µ μ κ±° μ²λ¦¬**μ—μ„λ„ ν•µμ‹¬ κ°λ…

---

## β… κ²°λ΅ 

- λ©±λ“±μ„±μ€ λ‹¨μν• HTTP μ†μ„±μ΄ μ•„λ‹λΌ, **μ•μ •μ μΈ APIμ™€ μ„λΉ„μ¤ μ„¤κ³„μ ν•µμ‹¬ μ² ν•™**
- POSTλΌλ„ λ©±λ“±ν•κ² μ„¤κ³„ν•  μ μμΌλ©°, λ©±λ“±μ„±μ„ μ–΄λ””μ„ λ³΄μ¥ν• μ§€λ” **μ•„ν‚¤ν…μ² μ„¤κ³„μ λ«**
